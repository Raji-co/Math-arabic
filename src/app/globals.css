@import '@serlo/editor/dist/style.css';
@import 'katex/dist/katex.min.css';

:root {
  --serlo-blue: #007ec1;
  --serlo-light-blue: #e6f2f9;
  --serlo-green: #95c11f;
  --serlo-dark: #333333;
  --background: #fdfdfd;
  --foreground: #222222;
  --surface: #ffffff;
  --border: #eaecf0;
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.05);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  background-color: var(--background);
  color: var(--foreground);
  font-family: var(--font-cairo), system-ui, sans-serif;
  line-height: 1.6;
}

a {
  color: inherit;
  text-decoration: none;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

/* =========================================================
   SERLO EDITOR GLOBAL RTL FIXES
   ========================================================= */

/* The editor wrapper stays LTR to preserve Tailwind's physical positioning (left, margin-left) for core UI (drag handles, menus) */
.serlo-editor-wrapper {
  direction: ltr;
}

/* Force ALL plugin contents to RTL by default */
.serlo-editor-wrapper [data-document="true"],
.serlo-editor-wrapper .plugin-wrapper-container,
.serlo-editor-wrapper [data-qa^="plugin-"] {
  direction: rtl;
  text-align: right;
}

/* Ensure math formulas (Katex) and symbols are ALWAYS LTR so they render correctly */
.serlo-editor-wrapper .math-block,
.serlo-editor-wrapper .katex,
.serlo-editor-wrapper .katex-display,
.serlo-editor-wrapper .serlo-math-wrapper,
.serlo-editor-wrapper [data-qa="math-editor"] {
  direction: ltr !important;
  text-align: left !important;
  display: inline-block;
}

/* General Layout for Equations (Tables) */
.serlo-editor-wrapper table {
  direction: rtl;
  text-align: right;
  width: 100%;
}

.serlo-editor-wrapper table tr {
  width: 100%;
}

.serlo-editor-wrapper table td {
  text-align: right !important;
}

/* Buttons like Add new row should go to the right */
.serlo-editor-wrapper button.serlo-button-edit-secondary,
.serlo-editor-wrapper .mx-side>button {
  float: right;
  direction: rtl;
  clear: both;
}

/* Text inputs, textareas, and contenteditable blocks should be RTL */
.serlo-editor-wrapper textarea,
.serlo-editor-wrapper [contenteditable="true"],
.serlo-editor-wrapper input[type="text"] {
  direction: rtl;
  text-align: right;
}

/* Plugin Toolbars */
.serlo-editor-wrapper .plugin-toolbar {
  direction: rtl;
  flex-direction: row-reverse !important;
}

.serlo-editor-wrapper .plugin-toolbar>div {
  display: flex !important;
  flex-direction: row-reverse !important;
}

/* Ensure the first child container (formatting controls) is pushed to the far left in RTL */
.serlo-editor-wrapper .plugin-toolbar>div:first-child {
  margin-left: auto;
  margin-right: 0;
}

/* General labels and buttons */
.serlo-editor-wrapper label,
.serlo-editor-wrapper button,
.serlo-editor-wrapper select {
  direction: rtl;
  text-align: right;
}

/* Interactive Exercises Flex Layout (Answers, Feedback) */
.serlo-editor-wrapper .serlo-interactive-exercise {
  direction: rtl;
}

.serlo-editor-wrapper [data-qa="plugin-exercise-scq"] .flex.flex-row,
.serlo-editor-wrapper .serlo-interactive-exercise .flex.flex-row,
.serlo-editor-wrapper [data-qa="plugin-exercise-input"] .flex.flex-row {
  flex-direction: row-reverse;
}

/* Check Button Alignment */
.serlo-editor-wrapper .serlo-interactive-exercise-submit-container {
  display: flex;
  flex-direction: row-reverse;
  justify-content: flex-start;
}



/* Delete Button Position */
.serlo-editor-wrapper button[aria-label="remove"],
.serlo-editor-wrapper button[title="Remove"],
.serlo-editor-wrapper div[data-qa="plugin-exercise-scq"]>div.flex>div.flex.flex-col>div.relative>button[aria-label="remove"] {
  position: absolute;
  right: auto;
  left: 0;
}

/* Box Plugin Header Margins */
.serlo-editor-wrapper .serlo-box figcaption span.mr-1\.5 {
  margin-right: 0;
  margin-left: 0.375rem;
}

.serlo-editor-wrapper .serlo-box figcaption div.-ml-1 {
  margin-left: 0;
  margin-right: -0.25rem;
}

/* Box empty content warning */
.serlo-editor-wrapper .box-warning {
  right: auto !important;
  left: 2.5rem !important;
}

/* Sub-items list default right alignment */
.serlo-editor-wrapper ul,
.serlo-editor-wrapper ol {
  direction: rtl;
  text-align: right;
}

/* =========================================================
   UX & AESTHETIC UPGRADES (PREMIUM ARABIC UI)
   ========================================================= */

/* 1. Typography - Force Cairo font everywhere inside the editor */
.serlo-editor-wrapper {
  font-family: var(--font-cairo), sans-serif !important;
}

.serlo-editor-wrapper * {
  font-family: inherit;
}

/* Ensure math rendering still uses its own dedicated fonts (KaTeX) */
.serlo-editor-wrapper .katex * {
  font-family: KaTeX_Main, 'Times New Roman', serif !important;
}

.serlo-editor-wrapper .katex-math * {
  font-family: KaTeX_Math, 'Times New Roman', serif !important;
}

/* 2. Micro-animations - Smooth transitions for all interactive elements */
.serlo-editor-wrapper button,
.serlo-editor-wrapper input,
.serlo-editor-wrapper textarea,
.serlo-editor-wrapper select,
.serlo-editor-wrapper .plugin-toolbar,
.serlo-editor-wrapper [data-qa^="plugin-"] {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 3. Button Hover States - Slight scale and background dimming */
.serlo-editor-wrapper button:hover:not(:disabled) {
  transform: scale(1.02);
  filter: brightness(0.95);
}

.serlo-editor-wrapper button:active:not(:disabled) {
  transform: scale(0.98);
}

/* 4. Elevated Focus States - Replace rigid outlines with soft glowing box-shadows */
.serlo-editor-wrapper input:focus,
.serlo-editor-wrapper textarea:focus,
.serlo-editor-wrapper [contenteditable="true"]:focus,
.serlo-editor-wrapper select:focus {
  outline: none !important;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3) !important;
  border-color: #3b82f6 !important;
}

/* 5. Toolbar Aesthetics - Glassmorphism hint, shadow, and rounded edges */
.serlo-editor-wrapper .plugin-toolbar {
  box-shadow: 0 4px 12px -2px rgba(0, 0, 0, 0.1), 0 2px 6px -2px rgba(0, 0, 0, 0.06) !important;
  border-radius: 8px !important;
  border: 1px solid rgba(0, 0, 0, 0.05);
  background-color: rgba(255, 255, 255, 0.95) !important;
  backdrop-filter: blur(8px);
}

/* 6. MD3 Surface Elevation for Plugin Layers - Replaces flat borders with depth */
.serlo-editor-wrapper .plugin-wrapper-container {
  background-color: #ffffff;
  /* MD3 Surface */
  border-radius: 12px;
  border: 1px solid rgba(0, 0, 0, 0.08);
  /* Subtle outline */
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  /* MD3 Elevation 1 */
  margin: 12px 0;
  padding: 16px;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Hover state for plugin layers */
.serlo-editor-wrapper .plugin-wrapper-container:hover {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
  /* MD3 Elevation 2 */
}

/* MD3 Surface Container Low for nested plugins (distinguishes child from parent) */
.serlo-editor-wrapper .plugin-wrapper-container .plugin-wrapper-container {
  background-color: #f8f9fa;
  /* MD3 Surface Container Low */
  box-shadow: none;
  border: 1px solid rgba(0, 0, 0, 0.06);
}

/* 3rd level deep returns to Surface for contrast */
.serlo-editor-wrapper .plugin-wrapper-container .plugin-wrapper-container .plugin-wrapper-container {
  background-color: #ffffff;
  border: 1px solid rgba(0, 0, 0, 0.08);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

/* No more inset blue lines on focus-within to avoid ancestor stacking visual bugs */
.serlo-editor-wrapper .plugin-wrapper-container:focus-within {
  border-color: rgba(59, 130, 246, 0.5);
  /* Highlight just the border softly */
}

/* ── SerloRenderer read-only view ───────────────────────────────── */
.serlo-renderer-wrapper {
  direction: rtl;
  text-align: right;
  font-size: 1.1rem;
  line-height: 1.85;
  color: #1a202c;
}

.serlo-renderer-wrapper h1,
.serlo-renderer-wrapper h2,
.serlo-renderer-wrapper h3 {
  font-weight: 700;
  margin-top: 1.5rem;
  margin-bottom: 0.5rem;
  color: #1a202c;
}

.serlo-renderer-wrapper h2 {
  font-size: 1.4rem;
  border-bottom: 2px solid #e2e8f0;
  padding-bottom: 0.4rem;
}

.serlo-renderer-wrapper h3 {
  font-size: 1.2rem;
  color: #007ec1;
}

.serlo-renderer-wrapper p {
  margin-bottom: 1rem;
}

.serlo-renderer-wrapper ul,
.serlo-renderer-wrapper ol {
  padding-right: 1.5rem;
  padding-left: 0;
  margin-bottom: 1rem;
}

.serlo-renderer-wrapper li {
  margin-bottom: 0.35rem;
}

/* Keep math LTR */
.serlo-renderer-wrapper .katex,
.serlo-renderer-wrapper .katex-display,
.serlo-renderer-wrapper .math-inline,
.serlo-renderer-wrapper .math-block {
  direction: ltr !important;
  text-align: left !important;
  display: inline-block;
}

.serlo-renderer-wrapper .katex-display {
  display: block;
  overflow-x: auto;
  text-align: center !important;
  margin: 1.25rem 0;
}